# Study Time Tracker - Architecture Diagram

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FRONTEND (React)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  StudentDashboard.tsx                                              â”‚
â”‚  â”œâ”€ StudyTimer Component          â”œâ”€ StudyStats Component          â”‚
â”‚  â”‚  â”œâ”€ Start/Pause/Reset          â”‚  â”œâ”€ Streak Display            â”‚
â”‚  â”‚  â”œâ”€ Timer Display              â”‚  â”œâ”€ Hours Logged              â”‚
â”‚  â”‚  â””â”€ Save Session Dialog         â”‚  â”œâ”€ Daily Breakdown           â”‚
â”‚  â”‚                                â”‚  â””â”€ Subject Breakdown         â”‚
â”‚  â”‚                                                                 â”‚
â”‚  StudyLogs.tsx (Full Page)                                         â”‚
â”‚  â”œâ”€ Log List (paginated)                                           â”‚
â”‚  â”œâ”€ Manual Entry Dialog                                            â”‚
â”‚  â””â”€ Delete Functionality                                           â”‚
â”‚                                                                     â”‚
â”‚  studyTrackerApi.ts (Service Layer)                                â”‚
â”‚  â”œâ”€ startStudySession()                                            â”‚
â”‚  â”œâ”€ stopStudySession()                                             â”‚
â”‚  â”œâ”€ manualLogStudyHours()                                          â”‚
â”‚  â”œâ”€ getStudyLogs()                                                 â”‚
â”‚  â”œâ”€ getStudyStreak()                                               â”‚
â”‚  â”œâ”€ getStudyStats()                                                â”‚
â”‚  â””â”€ deleteStudyLog()                                               â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                        HTTP Requests/Responses
                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       BACKEND (Express)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  API Routes: /api/studylogs                                         â”‚
â”‚                                                                     â”‚
â”‚  â”œâ”€ POST /sessions/start         â”œâ”€ GET /logs                      â”‚
â”‚  â”œâ”€ POST /sessions/stop          â”œâ”€ GET /streak                    â”‚
â”‚  â”œâ”€ POST /manual-log             â”œâ”€ GET /stats                     â”‚
â”‚  â””â”€ DELETE /:logId               â”‚                                 â”‚
â”‚                                  â”‚                                 â”‚
â”‚  Middleware                       Authentication                    â”‚
â”‚  â”œâ”€ protect (JWT auth)           â”œâ”€ Validate token                 â”‚
â”‚  â”œâ”€ Input validation             â””â”€ Check ownership                â”‚
â”‚  â””â”€ Error handling                                                  â”‚
â”‚                                                                     â”‚
â”‚  Utility Functions: streakHelper.ts                                 â”‚
â”‚  â”œâ”€ updateStudyStreak()          â”œâ”€ calculateTotalHours()          â”‚
â”‚  â”œâ”€ hasStudiedToday()            â”œâ”€ getStudyStats()                â”‚
â”‚  â””â”€ getTodayDate()               â”‚                                 â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                        Mongoose ODM Queries
                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DATABASE (MongoDB)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  StudyLog Collection                                                â”‚
â”‚  â”œâ”€ userId (indexed)                                                â”‚
â”‚  â”œâ”€ subject                                                         â”‚
â”‚  â”œâ”€ duration                                                        â”‚
â”‚  â”œâ”€ startTime                                                       â”‚
â”‚  â”œâ”€ endTime                                                         â”‚
â”‚  â”œâ”€ notes                                                           â”‚
â”‚  â”œâ”€ date (indexed with userId)                                      â”‚
â”‚  â””â”€ createdAt                                                       â”‚
â”‚                                                                     â”‚
â”‚  StudyStreak Collection                                             â”‚
â”‚  â”œâ”€ userId (unique, indexed)                                        â”‚
â”‚  â”œâ”€ currentStreak                                                   â”‚
â”‚  â”œâ”€ longestStreak                                                   â”‚
â”‚  â”œâ”€ lastStudyDate                                                   â”‚
â”‚  â”œâ”€ totalHours                                                      â”‚
â”‚  â”œâ”€ totalSessions                                                   â”‚
â”‚  â””â”€ updatedAt                                                       â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow: Recording a Session

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   USER ACTION: START TIMER                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend: StudyTimer Component                                     â”‚
â”‚  - Initialize timer to 0                                            â”‚
â”‚  - Start incrementing every second (client-side)                    â”‚
â”‚  - Display MM:SS or HH:MM:SS format                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USER ACTION: CLICK "SAVE SESSION"                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend: Show Dialog                                              â”‚
â”‚  - Display duration: MM:SS                                          â”‚
â”‚  - Optional: Add subject                                            â”‚
â”‚  - Optional: Add notes                                              â”‚
â”‚  - User confirms save                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  POST /api/studylogs/sessions/stop                                  â”‚
â”‚  {                                                                  â”‚
â”‚    "duration": 65,        (minutes)                                 â”‚
â”‚    "startTime": "2025-01-20T14:00:00Z",                             â”‚
â”‚    "subject": "Mathematics",                                        â”‚
â”‚    "notes": "Chapter 5 exercises"                                   â”‚
â”‚  }                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend: studylogs.ts Route Handler                                â”‚
â”‚                                                                     â”‚
â”‚  1. Validate input                                                  â”‚
â”‚  2. Create StudyLog document                                        â”‚
â”‚     {                                                               â”‚
â”‚       userId: user._id,                                             â”‚
â”‚       duration: 65,                                                 â”‚
â”‚       startTime: new Date("2025-01-20T14:00:00Z"),                 â”‚
â”‚       endTime: new Date("2025-01-20T15:05:00Z"),                   â”‚
â”‚       subject: "Mathematics",                                       â”‚
â”‚       date: new Date("2025-01-20T00:00:00Z"),  â† midnight UTC      â”‚
â”‚       notes: "Chapter 5 exercises"                                  â”‚
â”‚     }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  streakHelper.updateStudyStreak(userId)                             â”‚
â”‚                                                                     â”‚
â”‚  1. Get/Create StudyStreak document                                 â”‚
â”‚  2. Check if studied today â†’ YES                                    â”‚
â”‚  3. Check if studied yesterday                                      â”‚
â”‚     - If YES: currentStreak++                                       â”‚
â”‚     - If NO: check gap, continue or reset                           â”‚
â”‚  4. Update longestStreak if current > longest                       â”‚
â”‚  5. Save StudyStreak                                                â”‚
â”‚                                                                     â”‚
â”‚  Updated Streak:                                                    â”‚
â”‚  {                                                                  â”‚
â”‚    currentStreak: 5,                                                â”‚
â”‚    longestStreak: 12,                                               â”‚
â”‚    lastStudyDate: new Date("2025-01-20T00:00:00Z")                 â”‚
â”‚  }                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Update Aggregates                                                  â”‚
â”‚                                                                     â”‚
â”‚  totalHours = sum(all logs.duration) / 60                           â”‚
â”‚  totalSessions = count(all logs)                                    â”‚
â”‚                                                                     â”‚
â”‚  Save to StudyStreak:                                               â”‚
â”‚  {                                                                  â”‚
â”‚    totalHours: 47.5,                                                â”‚
â”‚    totalSessions: 42                                                â”‚
â”‚  }                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Check Milestone                                                    â”‚
â”‚                                                                     â”‚
â”‚  IF currentStreak % 7 == 0 AND currentStreak > 0:                   â”‚
â”‚    createNotification({                                             â”‚
â”‚      userId: user._id,                                              â”‚
â”‚      type: 'achievement',                                           â”‚
â”‚      title: 'ğŸ”¥ 7-Day Streak!',                                     â”‚
â”‚      message: 'Amazing! You maintained a 7-day streak!'             â”‚
â”‚    })                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Return Response to Frontend                                        â”‚
â”‚  {                                                                  â”‚
â”‚    message: 'Study session saved',                                  â”‚
â”‚    studyLog: { /* ... */ },                                         â”‚
â”‚    streak: {                                                        â”‚
â”‚      currentStreak: 5,                                              â”‚
â”‚      longestStreak: 12,                                             â”‚
â”‚      lastStudyDate: "2025-01-20T00:00:00Z"                          â”‚
â”‚    }                                                                â”‚
â”‚  }                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend: Update UI                                                â”‚
â”‚  - Reset timer to 00:00                                             â”‚
â”‚  - Show success toast notification                                  â”‚
â”‚  - Refresh StudyStats component                                     â”‚
â”‚  - Update streak badge (now shows "ğŸ”¥ 5d")                          â”‚
â”‚  - Update stats cards with new totals                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Streak Logic State Machine

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   No Streak (0)      â”‚
                    â”‚   lastStudyDate: nil â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–²
                            â”‚
                    Study on Day 1
                            â”‚
                            â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Streak = 1         â”‚
                    â”‚   lastStudyDate: D1  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”œâ”€ Study on Day 2 â”€â”
                            â”‚                   â”‚
                            â”‚                   â–¼
                            â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚          â”‚   Streak = 2         â”‚
                            â”‚          â”‚   lastStudyDate: D2  â”‚
                            â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚                   â”‚
                            â”‚          Study on Day 3
                            â”‚                   â”‚
                            â”‚                   â–¼
                            â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚          â”‚   Streak = 3         â”‚
                            â”‚          â”‚   lastStudyDate: D3  â”‚
                            â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚                   â”‚
                            â”‚      Gap > 1 day, NO study
                            â”‚                   â”‚
                            â”‚                   â–¼
                            â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Streak = 0         â”‚
                                       â”‚   lastStudyDate: D3  â”‚
                                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                      Study on next day
                                               â”‚
                                               â–¼
                                       (back to Streak = 1)
```

## Query Patterns

### Efficient Queries

```javascript
// Get all logs for today (indexed)
db.studylogs.find({
  userId: ObjectId("..."),
  date: { $gte: todayStart, $lt: tomorrowStart }
})

// Get week range (indexed)
db.studylogs.find({
  userId: ObjectId("..."),
  date: { $gte: weekStart, $lte: weekEnd }
}).sort({ date: -1 })

// Get user's streak (unique index on userId)
db.streaks.findOne({
  userId: ObjectId("...")
})
```

## Component Hierarchy

```
StudentDashboard
â”œâ”€ Stats Cards (task counts)
â”œâ”€ StudyTimer              â† Timer widget
â”‚  â”œâ”€ Display (MM:SS)
â”‚  â”œâ”€ Controls (Start/Pause/Reset)
â”‚  â””â”€ Save Dialog
â”œâ”€ Tasks Section
â”œâ”€ Sidebar
â”‚  â”œâ”€ Connections
â”‚  â””â”€ Study Tools
â”‚     â”œâ”€ Mind Map
â”‚     â”œâ”€ Zombie Game
â”‚     â”œâ”€ Peace Mode
â”‚     â””â”€ Study Logs Link
â””â”€ StudyStats             â† Statistics dashboard
   â”œâ”€ Streak Cards
   â”œâ”€ Tabs (Day/Week/Month/Year)
   â”œâ”€ Daily Breakdown
   â””â”€ Subject Breakdown

StudyLogs (Separate Page)
â”œâ”€ Header
â”œâ”€ Manual Entry Button
â””â”€ Logs List
   â”œâ”€ Pagination Controls
   â””â”€ Log Items (with delete)
```

---

This architecture ensures:
âœ… Scalable database queries with proper indexing
âœ… Efficient real-time updates with client-side timer
âœ… Clean separation of concerns (components â†’ services â†’ API â†’ database)
âœ… Automatic streak calculations with intelligent date logic
âœ… Milestone notifications for motivation
